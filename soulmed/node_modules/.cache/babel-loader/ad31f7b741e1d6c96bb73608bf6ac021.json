{"ast":null,"code":"import _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nvar arr = [];\nvar each = arr.forEach;\nvar slice = arr.slice;\n\nfunction defaults(obj) {\n  each.call(slice.call(arguments, 1), function (source) {\n    if (source) {\n      for (var prop in source) {\n        if (obj[prop] === undefined) obj[prop] = source[prop];\n      }\n    }\n  });\n  return obj;\n}\n\nfunction createClassOnDemand(ClassOrObject) {\n  if (!ClassOrObject) return null;\n  if (typeof ClassOrObject === 'function') return new ClassOrObject();\n  return ClassOrObject;\n}\n\nfunction getDefaults() {\n  return {\n    handleEmptyResourcesAsFailed: true\n  };\n}\n\nvar Backend = /*#__PURE__*/function () {\n  function Backend(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Backend);\n\n    this.backends = [];\n    this.type = 'backend';\n    this.init(services, options);\n  }\n\n  _createClass(Backend, [{\n    key: \"init\",\n    value: function init(services) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var i18nextOptions = arguments.length > 2 ? arguments[2] : undefined;\n      this.services = services;\n      this.options = defaults(options, this.options || {}, getDefaults());\n      this.options.backends && this.options.backends.forEach(function (b, i) {\n        _this.backends[i] = _this.backends[i] || createClassOnDemand(b);\n\n        _this.backends[i].init(services, _this.options.backendOptions && _this.options.backendOptions[i] || {}, i18nextOptions);\n      });\n    }\n  }, {\n    key: \"read\",\n    value: function read(language, namespace, callback) {\n      var _this2 = this;\n\n      var bLen = this.backends.length;\n\n      var loadPosition = function loadPosition(pos) {\n        if (pos >= bLen) return callback(new Error('non of the backend loaded data;', true)); // failed pass retry flag\n\n        var isLastBackend = pos === bLen - 1;\n        var lengthCheckAmount = _this2.options.handleEmptyResourcesAsFailed && !isLastBackend ? 0 : -1;\n        var backend = _this2.backends[pos];\n\n        if (backend.read) {\n          backend.read(language, namespace, function (err, data) {\n            if (!err && data && Object.keys(data).length > lengthCheckAmount) {\n              callback(null, data, pos);\n              savePosition(pos - 1, data); // save one in front\n            } else {\n              loadPosition(pos + 1); // try load from next\n            }\n          });\n        } else {\n          loadPosition(pos + 1); // try load from next\n        }\n      };\n\n      var savePosition = function savePosition(pos, data) {\n        if (pos < 0) return;\n        var backend = _this2.backends[pos];\n\n        if (backend.save) {\n          backend.save(language, namespace, data);\n          savePosition(pos - 1, data);\n        } else {\n          savePosition(pos - 1, data);\n        }\n      };\n\n      loadPosition(0);\n    }\n  }, {\n    key: \"create\",\n    value: function create(languages, namespace, key, fallbackValue) {\n      this.backends.forEach(function (b) {\n        if (b.create) b.create(languages, namespace, key, fallbackValue);\n      });\n    }\n  }]);\n\n  return Backend;\n}();\n\nBackend.type = 'backend';\nexport default Backend;","map":{"version":3,"sources":["/home/ma/soulmed-healthcare/node_modules/i18next-chained-backend/dist/esm/i18nextChainedBackend.js"],"names":["_classCallCheck","_createClass","arr","each","forEach","slice","defaults","obj","call","arguments","source","prop","undefined","createClassOnDemand","ClassOrObject","getDefaults","handleEmptyResourcesAsFailed","Backend","services","options","length","backends","type","init","key","value","_this","i18nextOptions","b","i","backendOptions","read","language","namespace","callback","_this2","bLen","loadPosition","pos","Error","isLastBackend","lengthCheckAmount","backend","err","data","Object","keys","savePosition","save","create","languages","fallbackValue"],"mappings":"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","sourcesContent":["import _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\n\nvar arr = [];\nvar each = arr.forEach;\nvar slice = arr.slice;\nfunction defaults(obj) {\n  each.call(slice.call(arguments, 1), function (source) {\n    if (source) {\n      for (var prop in source) {\n        if (obj[prop] === undefined) obj[prop] = source[prop];\n      }\n    }\n  });\n  return obj;\n}\nfunction createClassOnDemand(ClassOrObject) {\n  if (!ClassOrObject) return null;\n  if (typeof ClassOrObject === 'function') return new ClassOrObject();\n  return ClassOrObject;\n}\n\nfunction getDefaults() {\n  return {\n    handleEmptyResourcesAsFailed: true\n  };\n}\n\nvar Backend = /*#__PURE__*/function () {\n  function Backend(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Backend);\n\n    this.backends = [];\n    this.type = 'backend';\n    this.init(services, options);\n  }\n\n  _createClass(Backend, [{\n    key: \"init\",\n    value: function init(services) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var i18nextOptions = arguments.length > 2 ? arguments[2] : undefined;\n      this.services = services;\n      this.options = defaults(options, this.options || {}, getDefaults());\n      this.options.backends && this.options.backends.forEach(function (b, i) {\n        _this.backends[i] = _this.backends[i] || createClassOnDemand(b);\n\n        _this.backends[i].init(services, _this.options.backendOptions && _this.options.backendOptions[i] || {}, i18nextOptions);\n      });\n    }\n  }, {\n    key: \"read\",\n    value: function read(language, namespace, callback) {\n      var _this2 = this;\n\n      var bLen = this.backends.length;\n\n      var loadPosition = function loadPosition(pos) {\n        if (pos >= bLen) return callback(new Error('non of the backend loaded data;', true)); // failed pass retry flag\n\n        var isLastBackend = pos === bLen - 1;\n        var lengthCheckAmount = _this2.options.handleEmptyResourcesAsFailed && !isLastBackend ? 0 : -1;\n        var backend = _this2.backends[pos];\n\n        if (backend.read) {\n          backend.read(language, namespace, function (err, data) {\n            if (!err && data && Object.keys(data).length > lengthCheckAmount) {\n              callback(null, data, pos);\n              savePosition(pos - 1, data); // save one in front\n            } else {\n              loadPosition(pos + 1); // try load from next\n            }\n          });\n        } else {\n          loadPosition(pos + 1); // try load from next\n        }\n      };\n\n      var savePosition = function savePosition(pos, data) {\n        if (pos < 0) return;\n        var backend = _this2.backends[pos];\n\n        if (backend.save) {\n          backend.save(language, namespace, data);\n          savePosition(pos - 1, data);\n        } else {\n          savePosition(pos - 1, data);\n        }\n      };\n\n      loadPosition(0);\n    }\n  }, {\n    key: \"create\",\n    value: function create(languages, namespace, key, fallbackValue) {\n      this.backends.forEach(function (b) {\n        if (b.create) b.create(languages, namespace, key, fallbackValue);\n      });\n    }\n  }]);\n\n  return Backend;\n}();\n\nBackend.type = 'backend';\n\nexport default Backend;\n"]},"metadata":{},"sourceType":"module"}