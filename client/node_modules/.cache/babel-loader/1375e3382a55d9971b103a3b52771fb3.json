{"ast":null,"code":"var _jsxFileName = \"/home/ma/soulmed-healthcare/client/src/App.js\";\nimport React, { useEffect, useState, useRef, Suspense } from \"react\";\nimport io from \"socket.io-client\";\nimport Peer from \"simple-peer\";\nimport Rodal from \"rodal\";\nimport { Howl } from \"howler\";\nimport \"rodal/lib/rodal.css\";\nimport camera from \"./Icons/camera.svg\";\nimport camerastop from \"./Icons/camera-stop.svg\";\nimport microphone from \"./Icons/microphone.svg\";\nimport microphonestop from \"./Icons/microphone-stop.svg\";\nimport share from \"./Icons/share.svg\";\nimport hangup from \"./Icons/hang-up.svg\";\nimport fullscreen from \"./Icons/fullscreen.svg\";\nimport minimize from \"./Icons/minimize.svg\";\nimport ringtone from \"./Sounds/ringtone.mp3\";\nconst Watermark = React.lazy(() => import(\"./Components/Watermark/Watermark\"));\nconst ringtoneSound = new Howl({\n  src: [ringtone],\n  loop: true,\n  preload: true\n});\n\nfunction App({ ...props\n}) {\n  const [yourID, setYourID] = useState(\"\");\n  const [users, setUsers] = useState({});\n  const [stream, setStream] = useState();\n  const [receivingCall, setReceivingCall] = useState(false);\n  const [caller, setCaller] = useState(\"\");\n  const [callingFriend, setCallingFriend] = useState(false);\n  const [callerSignal, setCallerSignal] = useState();\n  const [callAccepted, setCallAccepted] = useState(false);\n  const [callRejected, setCallRejected] = useState(false);\n  const [receiverID, setReceiverID] = useState(\"\");\n  const [modalVisible, setModalVisible] = useState(false);\n  const [modalMessage, setModalMessage] = useState(\"\");\n  const [audioMuted, setAudioMuted] = useState(false);\n  const [videoMuted, setVideoMuted] = useState(false);\n  const [isfullscreen, setFullscreen] = useState(false);\n  const [copied, setCopied] = useState(false);\n  const userVideo = useRef();\n  const partnerVideo = useRef();\n  const socket = useRef();\n  const myPeer = useRef();\n  let landingHTML = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"u-margin-top-xxlarge u-margin-bottom-xxlarge\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"o-wrapper-l\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hero flex flex-column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"callBox flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Friend ID\",\n    value: receiverID,\n    onChange: e => setReceiverID(e.target.value),\n    className: \"form-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => callPeer(receiverID.toLowerCase().trim()),\n    className: \"primaryButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, \"Call\")))))));\n  useEffect(() => {\n    const id = window.location.pathname.split(\"/\")[1];\n    socket.current = io(\"http://localhost:4002\");\n    setYourID(id);\n    socket.current.emit(\"newUser\", id).then(() => {\n      socket.current.on(\"allUsers\", users => {\n        setUsers(users);\n      });\n    });\n    socket.current.on(\"hey\", data => {\n      setReceivingCall(true);\n      ringtoneSound.play();\n      setCaller(data.from);\n      setCallerSignal(data.signal);\n    });\n  }, []);\n\n  function callPeer(id) {\n    if (id !== \"\" && users[id] && id !== yourID) {\n      console.log(JSON.stringify(users) + \" \" + id);\n      navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: true\n      }).then(stream => {\n        setStream(stream);\n        setCallingFriend(true);\n        setCaller(id);\n\n        if (userVideo.current) {\n          userVideo.current.srcObject = stream;\n        }\n\n        const peer = new Peer({\n          initiator: true,\n          trickle: false,\n          config: {\n            iceServers: [// {\n            //     urls: \"stun:numb.viagenie.ca\",\n            //     username: \"sultan1640@gmail.com\",\n            //     credential: \"98376683\"\n            // },\n            // {\n            //     urls: \"turn:numb.viagenie.ca\",\n            //     username: \"sultan1640@gmail.com\",\n            //     credential: \"98376683\"\n            // }\n            {\n              url: \"stun:stun01.sipphone.com\"\n            }, {\n              url: \"stun:stun.ekiga.net\"\n            }, {\n              url: \"stun:stun.fwdnet.net\"\n            }, {\n              url: \"stun:stun.ideasip.com\"\n            }, {\n              url: \"stun:stun.iptel.org\"\n            }, {\n              url: \"stun:stun.rixtelecom.se\"\n            }, {\n              url: \"stun:stun.schlund.de\"\n            }, {\n              url: \"stun:stun.l.google.com:19302\"\n            }, {\n              url: \"stun:stun1.l.google.com:19302\"\n            }, {\n              url: \"stun:stun2.l.google.com:19302\"\n            }, {\n              url: \"stun:stun3.l.google.com:19302\"\n            }, {\n              url: \"stun:stun4.l.google.com:19302\"\n            }, {\n              url: \"stun:stunserver.org\"\n            }, {\n              url: \"stun:stun.softjoys.com\"\n            }, {\n              url: \"stun:stun.voiparound.com\"\n            }, {\n              url: \"stun:stun.voipbuster.com\"\n            }, {\n              url: \"stun:stun.voipstunt.com\"\n            }, {\n              url: \"stun:stun.voxgratia.org\"\n            }, {\n              url: \"stun:stun.xten.com\"\n            }, {\n              url: \"turn:numb.viagenie.ca\",\n              credential: \"muazkh\",\n              username: \"webrtc@live.com\"\n            }, {\n              url: \"turn:192.158.29.39:3478?transport=udp\",\n              credential: \"JZEOEt2V3Qb0y27GRntt2u2PAYA=\",\n              username: \"28224511:1379330808\"\n            }, {\n              url: \"turn:192.158.29.39:3478?transport=tcp\",\n              credential: \"JZEOEt2V3Qb0y27GRntt2u2PAYA=\",\n              username: \"28224511:1379330808\"\n            }]\n          },\n          stream: stream\n        });\n        myPeer.current = peer;\n        peer.on(\"signal\", data => {\n          socket.current.emit(\"callUser\", {\n            userToCall: id,\n            signalData: data,\n            from: yourID\n          });\n        });\n        peer.on(\"stream\", stream => {\n          if (partnerVideo.current) {\n            partnerVideo.current.srcObject = stream;\n          }\n        });\n        peer.on(\"error\", err => {\n          endCall();\n        });\n        socket.current.on(\"callAccepted\", signal => {\n          setCallAccepted(true);\n          peer.signal(signal);\n        });\n        socket.current.on(\"close\", () => {\n          window.location.reload();\n        });\n        socket.current.on(\"rejected\", () => {\n          window.location.reload();\n        });\n      }).catch(() => {\n        setModalMessage(\"You cannot place/ receive a call without granting video and audio permissions! Please change your settings to use Cuckoo.\");\n        setModalVisible(true);\n      });\n    } else {\n      setModalMessage(\"We think the username entered is wrong. Please check again and retry!\");\n      setModalVisible(true);\n      return;\n    }\n  }\n\n  function acceptCall() {\n    ringtoneSound.unload();\n    navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: true\n    }).then(stream => {\n      setStream(stream);\n\n      if (userVideo.current) {\n        userVideo.current.srcObject = stream;\n      }\n\n      setCallAccepted(true);\n      const peer = new Peer({\n        initiator: false,\n        trickle: false,\n        stream: stream\n      });\n      myPeer.current = peer;\n      peer.on(\"signal\", data => {\n        socket.current.emit(\"acceptCall\", {\n          signal: data,\n          to: caller\n        });\n      });\n      peer.on(\"stream\", stream => {\n        partnerVideo.current.srcObject = stream;\n      });\n      peer.on(\"error\", err => {\n        endCall();\n      });\n      peer.signal(callerSignal);\n      socket.current.on(\"close\", () => {\n        window.location.reload();\n      });\n    }).catch(() => {\n      setModalMessage(\"You cannot place/ receive a call without granting video and audio permissions! Please change your settings to use Cuckoo.\");\n      setModalVisible(true);\n    });\n  }\n\n  function rejectCall() {\n    ringtoneSound.unload();\n    setCallRejected(true);\n    socket.current.emit(\"rejected\", {\n      to: caller\n    });\n    window.location.reload();\n  }\n\n  function endCall() {\n    myPeer.current.destroy();\n    socket.current.emit(\"close\", {\n      to: caller\n    });\n    window.location.reload();\n  }\n\n  function shareScreen() {\n    navigator.mediaDevices.getDisplayMedia({\n      cursor: true\n    }).then(screenStream => {\n      myPeer.current.replaceTrack(stream.getVideoTracks()[0], screenStream.getVideoTracks()[0], stream);\n      userVideo.current.srcObject = screenStream;\n\n      screenStream.getTracks()[0].onended = () => {\n        myPeer.current.replaceTrack(screenStream.getVideoTracks()[0], stream.getVideoTracks()[0], stream);\n        userVideo.current.srcObject = stream;\n      };\n    });\n  }\n\n  function toggleMuteAudio() {\n    if (stream) {\n      setAudioMuted(!audioMuted);\n      stream.getAudioTracks()[0].enabled = audioMuted;\n    }\n  }\n\n  function toggleMuteVideo() {\n    if (stream) {\n      setVideoMuted(!videoMuted);\n      stream.getVideoTracks()[0].enabled = videoMuted;\n    }\n  }\n\n  function renderLanding() {\n    if (!callRejected && !callAccepted && !callingFriend) return \"block\";\n    return \"none\";\n  }\n\n  function renderCall() {\n    if (!callRejected && !callAccepted && !callingFriend) return \"none\";\n    return \"block\";\n  }\n\n  function isMobileDevice() {\n    let check = false;\n\n    (function (a) {\n      if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true;\n    })(navigator.userAgent || navigator.vendor || window.opera);\n\n    return check;\n  }\n\n  function showCopiedMessage() {\n    navigator.clipboard.writeText(yourID);\n    setCopied(true);\n    setInterval(() => {\n      setCopied(false);\n    }, 1000);\n  }\n\n  let UserVideo;\n\n  if (stream) {\n    UserVideo = /*#__PURE__*/React.createElement(\"video\", {\n      className: \"userVideo\",\n      playsInline: true,\n      muted: true,\n      ref: userVideo,\n      autoPlay: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 7\n      }\n    });\n  }\n\n  let PartnerVideo;\n\n  if (callAccepted && isfullscreen) {\n    PartnerVideo = /*#__PURE__*/React.createElement(\"video\", {\n      className: \"partnerVideo cover\",\n      playsInline: true,\n      ref: partnerVideo,\n      autoPlay: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 7\n      }\n    });\n  } else if (callAccepted && !isfullscreen) {\n    PartnerVideo = /*#__PURE__*/React.createElement(\"video\", {\n      className: \"partnerVideo\",\n      playsInline: true,\n      ref: partnerVideo,\n      autoPlay: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 7\n      }\n    });\n  }\n\n  let incomingCall;\n\n  if (receivingCall && !callAccepted && !callRejected) {\n    incomingCall = /*#__PURE__*/React.createElement(\"div\", {\n      className: \"incomingCallContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"incomingCall flex flex-column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"callerID\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 13\n      }\n    }, caller), \" is calling you!\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"incomingCallButtons flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      name: \"accept\",\n      className: \"alertButtonPrimary\",\n      onClick: () => acceptCall(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 13\n      }\n    }, \"Accept\"), /*#__PURE__*/React.createElement(\"button\", {\n      name: \"reject\",\n      className: \"alertButtonSecondary\",\n      onClick: () => rejectCall(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 13\n      }\n    }, \"Reject\"))));\n  }\n\n  let audioControl;\n\n  if (audioMuted) {\n    audioControl = /*#__PURE__*/React.createElement(\"span\", {\n      className: \"iconContainer\",\n      onClick: () => toggleMuteAudio(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: microphonestop,\n      alt: \"Unmute audio\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }\n    }));\n  } else {\n    audioControl = /*#__PURE__*/React.createElement(\"span\", {\n      className: \"iconContainer\",\n      onClick: () => toggleMuteAudio(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: microphone,\n      alt: \"Mute audio\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  let videoControl;\n\n  if (videoMuted) {\n    videoControl = /*#__PURE__*/React.createElement(\"span\", {\n      className: \"iconContainer\",\n      onClick: () => toggleMuteVideo(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: camerastop,\n      alt: \"Resume video\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 9\n      }\n    }));\n  } else {\n    videoControl = /*#__PURE__*/React.createElement(\"span\", {\n      className: \"iconContainer\",\n      onClick: () => toggleMuteVideo(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: camera,\n      alt: \"Stop audio\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  let screenShare = /*#__PURE__*/React.createElement(\"span\", {\n    className: \"iconContainer\",\n    onClick: () => shareScreen(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: share,\n    alt: \"Share screen\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 7\n    }\n  }));\n\n  if (isMobileDevice()) {\n    screenShare = /*#__PURE__*/React.createElement(React.Fragment, null);\n  }\n\n  let hangUp = /*#__PURE__*/React.createElement(\"span\", {\n    className: \"iconContainer\",\n    onClick: () => endCall(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: hangup,\n    alt: \"End call\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 7\n    }\n  }));\n  let fullscreenButton;\n\n  if (isfullscreen) {\n    fullscreenButton = /*#__PURE__*/React.createElement(\"span\", {\n      className: \"iconContainer\",\n      onClick: () => {\n        setFullscreen(false);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: minimize,\n      alt: \"fullscreen\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 9\n      }\n    }));\n  } else {\n    fullscreenButton = /*#__PURE__*/React.createElement(\"span\", {\n      className: \"iconContainer\",\n      onClick: () => {\n        setFullscreen(true);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: fullscreen,\n      alt: \"fullscreen\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: renderLanding()\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 7\n    }\n  }, landingHTML, /*#__PURE__*/React.createElement(Rodal, {\n    visible: modalVisible,\n    onClose: () => setModalVisible(false),\n    width: 20,\n    height: 5,\n    measure: \"em\",\n    closeOnEsc: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 11\n    }\n  }, modalMessage)), incomingCall), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"callContainer\",\n    style: {\n      display: renderCall()\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 29\n      }\n    }, \"Loading...\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Watermark, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"partnerVideoContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 9\n    }\n  }, PartnerVideo), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"userVideoContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 9\n    }\n  }, UserVideo), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"controlsContainer flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 9\n    }\n  }, audioControl, videoControl, screenShare, fullscreenButton, hangUp)));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/ma/soulmed-healthcare/client/src/App.js"],"names":["React","useEffect","useState","useRef","Suspense","io","Peer","Rodal","Howl","ringtone","Watermark","lazy","ringtoneSound","src","loop","preload","App","props","yourID","setYourID","users","setUsers","stream","setStream","receivingCall","setReceivingCall","caller","setCaller","callingFriend","setCallingFriend","callerSignal","setCallerSignal","callAccepted","setCallAccepted","callRejected","setCallRejected","receiverID","setReceiverID","modalVisible","setModalVisible","modalMessage","setModalMessage","audioMuted","setAudioMuted","videoMuted","setVideoMuted","isfullscreen","setFullscreen","copied","setCopied","userVideo","partnerVideo","socket","myPeer","landingHTML","e","target","value","callPeer","toLowerCase","trim","id","window","location","pathname","split","current","emit","then","on","data","play","from","signal","console","log","JSON","stringify","navigator","mediaDevices","getUserMedia","video","audio","srcObject","peer","initiator","trickle","config","iceServers","url","credential","username","userToCall","signalData","err","endCall","reload","catch","acceptCall","unload","to","rejectCall","destroy","shareScreen","getDisplayMedia","cursor","screenStream","replaceTrack","getVideoTracks","getTracks","onended","toggleMuteAudio","getAudioTracks","enabled","toggleMuteVideo","renderLanding","renderCall","isMobileDevice","check","a","test","substr","userAgent","vendor","opera","showCopiedMessage","clipboard","writeText","setInterval","UserVideo","PartnerVideo","incomingCall","audioControl","microphonestop","microphone","videoControl","camerastop","camera","screenShare","share","hangUp","hangup","fullscreenButton","minimize","fullscreen","display"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef, Suspense } from \"react\";\nimport io from \"socket.io-client\";\nimport Peer from \"simple-peer\";\nimport Rodal from \"rodal\";\nimport { Howl } from \"howler\";\nimport \"rodal/lib/rodal.css\";\nimport camera from \"./Icons/camera.svg\";\nimport camerastop from \"./Icons/camera-stop.svg\";\nimport microphone from \"./Icons/microphone.svg\";\nimport microphonestop from \"./Icons/microphone-stop.svg\";\nimport share from \"./Icons/share.svg\";\nimport hangup from \"./Icons/hang-up.svg\";\nimport fullscreen from \"./Icons/fullscreen.svg\";\nimport minimize from \"./Icons/minimize.svg\";\nimport ringtone from \"./Sounds/ringtone.mp3\";\n\nconst Watermark = React.lazy(() => import(\"./Components/Watermark/Watermark\"));\n\nconst ringtoneSound = new Howl({\n  src: [ringtone],\n  loop: true,\n  preload: true,\n});\n\nfunction App({ ...props }) {\n  const [yourID, setYourID] = useState(\"\");\n  const [users, setUsers] = useState({});\n  const [stream, setStream] = useState();\n  const [receivingCall, setReceivingCall] = useState(false);\n  const [caller, setCaller] = useState(\"\");\n  const [callingFriend, setCallingFriend] = useState(false);\n  const [callerSignal, setCallerSignal] = useState();\n  const [callAccepted, setCallAccepted] = useState(false);\n  const [callRejected, setCallRejected] = useState(false);\n  const [receiverID, setReceiverID] = useState(\"\");\n  const [modalVisible, setModalVisible] = useState(false);\n  const [modalMessage, setModalMessage] = useState(\"\");\n  const [audioMuted, setAudioMuted] = useState(false);\n  const [videoMuted, setVideoMuted] = useState(false);\n  const [isfullscreen, setFullscreen] = useState(false);\n  const [copied, setCopied] = useState(false);\n\n  const userVideo = useRef();\n  const partnerVideo = useRef();\n  const socket = useRef();\n  const myPeer = useRef();\n\n  let landingHTML = (\n    <>\n      <main>\n        <div className=\"u-margin-top-xxlarge u-margin-bottom-xxlarge\">\n          <div className=\"o-wrapper-l\">\n            <div className=\"hero flex flex-column\">\n              <div className=\"callBox flex\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Friend ID\"\n                  value={receiverID}\n                  onChange={(e) => setReceiverID(e.target.value)}\n                  className=\"form-input\"\n                />\n                <button\n                  onClick={() => callPeer(receiverID.toLowerCase().trim())}\n                  className=\"primaryButton\"\n                >\n                  Call\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n    </>\n  );\n\n  useEffect(() => {\n    const id = window.location.pathname.split(\"/\")[1];\n    socket.current = io(\"http://localhost:4002\");\n    setYourID(id);\n    socket.current.emit(\"newUser\", id).then(() => {\n      socket.current.on(\"allUsers\", (users) => {\n        setUsers(users);\n      });\n    });\n\n    socket.current.on(\"hey\", (data) => {\n      setReceivingCall(true);\n      ringtoneSound.play();\n      setCaller(data.from);\n      setCallerSignal(data.signal);\n    });\n  }, []);\n\n  function callPeer(id) {\n    if (id !== \"\" && users[id] && id !== yourID) {\n      console.log(JSON.stringify(users) + \" \" + id);\n\n      navigator.mediaDevices\n        .getUserMedia({ video: true, audio: true })\n        .then((stream) => {\n          setStream(stream);\n          setCallingFriend(true);\n          setCaller(id);\n          if (userVideo.current) {\n            userVideo.current.srcObject = stream;\n          }\n          const peer = new Peer({\n            initiator: true,\n            trickle: false,\n            config: {\n              iceServers: [\n                // {\n                //     urls: \"stun:numb.viagenie.ca\",\n                //     username: \"sultan1640@gmail.com\",\n                //     credential: \"98376683\"\n                // },\n                // {\n                //     urls: \"turn:numb.viagenie.ca\",\n                //     username: \"sultan1640@gmail.com\",\n                //     credential: \"98376683\"\n                // }\n                { url: \"stun:stun01.sipphone.com\" },\n                { url: \"stun:stun.ekiga.net\" },\n                { url: \"stun:stun.fwdnet.net\" },\n                { url: \"stun:stun.ideasip.com\" },\n                { url: \"stun:stun.iptel.org\" },\n                { url: \"stun:stun.rixtelecom.se\" },\n                { url: \"stun:stun.schlund.de\" },\n                { url: \"stun:stun.l.google.com:19302\" },\n                { url: \"stun:stun1.l.google.com:19302\" },\n                { url: \"stun:stun2.l.google.com:19302\" },\n                { url: \"stun:stun3.l.google.com:19302\" },\n                { url: \"stun:stun4.l.google.com:19302\" },\n                { url: \"stun:stunserver.org\" },\n                { url: \"stun:stun.softjoys.com\" },\n                { url: \"stun:stun.voiparound.com\" },\n                { url: \"stun:stun.voipbuster.com\" },\n                { url: \"stun:stun.voipstunt.com\" },\n                { url: \"stun:stun.voxgratia.org\" },\n                { url: \"stun:stun.xten.com\" },\n                {\n                  url: \"turn:numb.viagenie.ca\",\n                  credential: \"muazkh\",\n                  username: \"webrtc@live.com\",\n                },\n                {\n                  url: \"turn:192.158.29.39:3478?transport=udp\",\n                  credential: \"JZEOEt2V3Qb0y27GRntt2u2PAYA=\",\n                  username: \"28224511:1379330808\",\n                },\n                {\n                  url: \"turn:192.158.29.39:3478?transport=tcp\",\n                  credential: \"JZEOEt2V3Qb0y27GRntt2u2PAYA=\",\n                  username: \"28224511:1379330808\",\n                },\n              ],\n            },\n            stream: stream,\n          });\n\n          myPeer.current = peer;\n\n          peer.on(\"signal\", (data) => {\n            socket.current.emit(\"callUser\", {\n              userToCall: id,\n              signalData: data,\n              from: yourID,\n            });\n          });\n\n          peer.on(\"stream\", (stream) => {\n            if (partnerVideo.current) {\n              partnerVideo.current.srcObject = stream;\n            }\n          });\n\n          peer.on(\"error\", (err) => {\n            endCall();\n          });\n\n          socket.current.on(\"callAccepted\", (signal) => {\n            setCallAccepted(true);\n            peer.signal(signal);\n          });\n\n          socket.current.on(\"close\", () => {\n            window.location.reload();\n          });\n\n          socket.current.on(\"rejected\", () => {\n            window.location.reload();\n          });\n        })\n        .catch(() => {\n          setModalMessage(\n            \"You cannot place/ receive a call without granting video and audio permissions! Please change your settings to use Cuckoo.\"\n          );\n          setModalVisible(true);\n        });\n    } else {\n      setModalMessage(\n        \"We think the username entered is wrong. Please check again and retry!\"\n      );\n      setModalVisible(true);\n      return;\n    }\n  }\n\n  function acceptCall() {\n    ringtoneSound.unload();\n    navigator.mediaDevices\n      .getUserMedia({ video: true, audio: true })\n      .then((stream) => {\n        setStream(stream);\n        if (userVideo.current) {\n          userVideo.current.srcObject = stream;\n        }\n        setCallAccepted(true);\n        const peer = new Peer({\n          initiator: false,\n          trickle: false,\n          stream: stream,\n        });\n\n        myPeer.current = peer;\n\n        peer.on(\"signal\", (data) => {\n          socket.current.emit(\"acceptCall\", { signal: data, to: caller });\n        });\n\n        peer.on(\"stream\", (stream) => {\n          partnerVideo.current.srcObject = stream;\n        });\n\n        peer.on(\"error\", (err) => {\n          endCall();\n        });\n\n        peer.signal(callerSignal);\n\n        socket.current.on(\"close\", () => {\n          window.location.reload();\n        });\n      })\n      .catch(() => {\n        setModalMessage(\n          \"You cannot place/ receive a call without granting video and audio permissions! Please change your settings to use Cuckoo.\"\n        );\n        setModalVisible(true);\n      });\n  }\n\n  function rejectCall() {\n    ringtoneSound.unload();\n    setCallRejected(true);\n    socket.current.emit(\"rejected\", { to: caller });\n    window.location.reload();\n  }\n\n  function endCall() {\n    myPeer.current.destroy();\n    socket.current.emit(\"close\", { to: caller });\n    window.location.reload();\n  }\n\n  function shareScreen() {\n    navigator.mediaDevices\n      .getDisplayMedia({ cursor: true })\n      .then((screenStream) => {\n        myPeer.current.replaceTrack(\n          stream.getVideoTracks()[0],\n          screenStream.getVideoTracks()[0],\n          stream\n        );\n        userVideo.current.srcObject = screenStream;\n        screenStream.getTracks()[0].onended = () => {\n          myPeer.current.replaceTrack(\n            screenStream.getVideoTracks()[0],\n            stream.getVideoTracks()[0],\n            stream\n          );\n          userVideo.current.srcObject = stream;\n        };\n      });\n  }\n\n  function toggleMuteAudio() {\n    if (stream) {\n      setAudioMuted(!audioMuted);\n      stream.getAudioTracks()[0].enabled = audioMuted;\n    }\n  }\n\n  function toggleMuteVideo() {\n    if (stream) {\n      setVideoMuted(!videoMuted);\n      stream.getVideoTracks()[0].enabled = videoMuted;\n    }\n  }\n\n  function renderLanding() {\n    if (!callRejected && !callAccepted && !callingFriend) return \"block\";\n    return \"none\";\n  }\n\n  function renderCall() {\n    if (!callRejected && !callAccepted && !callingFriend) return \"none\";\n    return \"block\";\n  }\n\n  function isMobileDevice() {\n    let check = false;\n    (function (a) {\n      if (\n        /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n          a\n        ) ||\n        /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n          a.substr(0, 4)\n        )\n      )\n        check = true;\n    })(navigator.userAgent || navigator.vendor || window.opera);\n    return check;\n  }\n\n  function showCopiedMessage() {\n    navigator.clipboard.writeText(yourID);\n    setCopied(true);\n    setInterval(() => {\n      setCopied(false);\n    }, 1000);\n  }\n\n  let UserVideo;\n  if (stream) {\n    UserVideo = (\n      <video className=\"userVideo\" playsInline muted ref={userVideo} autoPlay />\n    );\n  }\n\n  let PartnerVideo;\n  if (callAccepted && isfullscreen) {\n    PartnerVideo = (\n      <video\n        className=\"partnerVideo cover\"\n        playsInline\n        ref={partnerVideo}\n        autoPlay\n      />\n    );\n  } else if (callAccepted && !isfullscreen) {\n    PartnerVideo = (\n      <video className=\"partnerVideo\" playsInline ref={partnerVideo} autoPlay />\n    );\n  }\n\n  let incomingCall;\n  if (receivingCall && !callAccepted && !callRejected) {\n    incomingCall = (\n      <div className=\"incomingCallContainer\">\n        <div className=\"incomingCall flex flex-column\">\n          <div>\n            <span className=\"callerID\">{caller}</span> is calling you!\n          </div>\n          <div className=\"incomingCallButtons flex\">\n            <button\n              name=\"accept\"\n              className=\"alertButtonPrimary\"\n              onClick={() => acceptCall()}\n            >\n              Accept\n            </button>\n            <button\n              name=\"reject\"\n              className=\"alertButtonSecondary\"\n              onClick={() => rejectCall()}\n            >\n              Reject\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  let audioControl;\n  if (audioMuted) {\n    audioControl = (\n      <span className=\"iconContainer\" onClick={() => toggleMuteAudio()}>\n        <img src={microphonestop} alt=\"Unmute audio\" />\n      </span>\n    );\n  } else {\n    audioControl = (\n      <span className=\"iconContainer\" onClick={() => toggleMuteAudio()}>\n        <img src={microphone} alt=\"Mute audio\" />\n      </span>\n    );\n  }\n\n  let videoControl;\n  if (videoMuted) {\n    videoControl = (\n      <span className=\"iconContainer\" onClick={() => toggleMuteVideo()}>\n        <img src={camerastop} alt=\"Resume video\" />\n      </span>\n    );\n  } else {\n    videoControl = (\n      <span className=\"iconContainer\" onClick={() => toggleMuteVideo()}>\n        <img src={camera} alt=\"Stop audio\" />\n      </span>\n    );\n  }\n\n  let screenShare = (\n    <span className=\"iconContainer\" onClick={() => shareScreen()}>\n      <img src={share} alt=\"Share screen\" />\n    </span>\n  );\n  if (isMobileDevice()) {\n    screenShare = <></>;\n  }\n\n  let hangUp = (\n    <span className=\"iconContainer\" onClick={() => endCall()}>\n      <img src={hangup} alt=\"End call\" />\n    </span>\n  );\n\n  let fullscreenButton;\n  if (isfullscreen) {\n    fullscreenButton = (\n      <span\n        className=\"iconContainer\"\n        onClick={() => {\n          setFullscreen(false);\n        }}\n      >\n        <img src={minimize} alt=\"fullscreen\" />\n      </span>\n    );\n  } else {\n    fullscreenButton = (\n      <span\n        className=\"iconContainer\"\n        onClick={() => {\n          setFullscreen(true);\n        }}\n      >\n        <img src={fullscreen} alt=\"fullscreen\" />\n      </span>\n    );\n  }\n\n  return (\n    <>\n      <div style={{ display: renderLanding() }}>\n        {landingHTML}\n        <Rodal\n          visible={modalVisible}\n          onClose={() => setModalVisible(false)}\n          width={20}\n          height={5}\n          measure={\"em\"}\n          closeOnEsc={true}\n        >\n          <div>{modalMessage}</div>\n        </Rodal>\n        {incomingCall}\n      </div>\n      <div className=\"callContainer\" style={{ display: renderCall() }}>\n        <Suspense fallback={<div>Loading...</div>}>\n          <Watermark />\n        </Suspense>\n        <div className=\"partnerVideoContainer\">{PartnerVideo}</div>\n        <div className=\"userVideoContainer\">{UserVideo}</div>\n        <div className=\"controlsContainer flex\">\n          {audioControl}\n          {videoControl}\n          {screenShare}\n          {fullscreenButton}\n          {hangUp}\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}